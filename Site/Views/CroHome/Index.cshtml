@{
	Layout = "~/Views/Shared/_ZcLayout.cshtml";
	ViewBag.Title = "首页";
}
<div class="row">
<div class="col-md-9">
	<div class="div_cont w100 fl green_edge">
		<div class="title">
			<b>活动公告</b><a href="@Url.Action("NewsMore", "CroResource")" class="glyphicon glyphicon-option-horizontal fr more"></a>
		</div>

	

		<div class="d_news">
			<ul class="news_list">
				@foreach (CroBulletin item in ViewBag.RankingOfBulletin)
				{
					<li>
						<a href="@Url.Action("NewsView", "CroResource", new { id = item.BulletinId })">·@item.Title <span>[@item.CreatedTime] </span></a>
					</li>
				}
			</ul>
			</div>


		</div>

	<!--最热排行榜-->

	<div class="div_cont fl w100 mt_20 green_edge">
		<div class="title">
			<b>最热排行榜</b>
			@*<span>
				<a href="javascript:;" class="blocktab tab1" data-cat="hot" data-type="1" data-url="@Url.Action("More", "CroResource", new { type = "rmyc", mediumtypepkid = "null", FileExtName = "null" })">原创</a>  |
				<a href="javascript:;" class="blocktab" data-cat="hot" data-type="2" data-url="@Url.Action("More", "CroResource", new { type = "rmtj", mediumtypepkid = "null", FileExtName = "null" })">推荐</a>
			</span>*@
			<a class="glyphicon glyphicon-option-horizontal fr more" id="more_hot" href="@Url.Action("More", "CroResource", new { type = "rmyc", mediumtypepkid = "null", FileExtName = "null" })"></a>
		</div>
		<div class="d_res_list" id="contain_hot">
		</div>
	</div>

	<!--得票排行榜-->

	<div class="div_cont fl w100 mt_20 green_edge">
		<div class="title">
			<b>得票排行榜</b>
			@*<span>
				<a href="javascript:;" class="blocktab tab1" data-cat="new" data-type="1" data-url="@Url.Action("More", "CroResource", new { type = "zxyc", mediumtypepkid = "null", FileExtName = "null" })">原创</a>  |
				<a href="javascript:;" class="blocktab" data-cat="new" data-type="2" data-url="@Url.Action("More", "CroResource", new { type = "zxtj", mediumtypepkid = "null", FileExtName = "null" })">推荐</a>
			</span>*@
			<a class="glyphicon glyphicon-option-horizontal fr more more_new" id="more_new" href="@Url.Action("More", "CroResource", new { type = "zxyc", mediumtypepkid = "null", FileExtName = "null" })"></a>
		</div>
		<div class="d_res_list" id="contain_top">
		</div>
	</div>

	<!--最新微课-->

	<div class="div_cont fl w100 mt_20 green_edge">
		<div class="title">
			<b>最新微课</b>
			@*<span>
				<a href="javascript:;" class="blocktab tab1" data-cat="new"  data-type="1" data-url="@Url.Action("More", "CroResource", new { type = "zxyc", mediumtypepkid = "null", FileExtName = "null" })">原创</a>  |
				<a href="javascript:;" class="blocktab" data-cat="new" data-type="2" data-url="@Url.Action("More", "CroResource", new { type = "zxtj", mediumtypepkid = "null", FileExtName = "null" })">推荐</a>
			</span>*@
			<a class="glyphicon glyphicon-option-horizontal fr more more_new" id="more_new" href="@Url.Action("More", "CroResource", new { type = "zxyc", mediumtypepkid = "null", FileExtName = "null" })"></a>
		</div>
		<div class="d_res_list" id="contain_new">
		</div>
	</div>

	<!--江苏省-->

	<div class="div_cont fl w100 mt_20 green_edge">
		<div class="title">
			<b>江苏</b>
			@*<span>
				<a href="javascript:;" class="blocktab tab1" data-cat="new" data-type="1" data-url="@Url.Action("More", "CroResource", new { type = "zxyc", mediumtypepkid = "null", FileExtName = "null" })">原创</a>  |
				<a href="javascript:;" class="blocktab" data-cat="new" data-type="2" data-url="@Url.Action("More", "CroResource", new { type = "zxtj", mediumtypepkid = "null", FileExtName = "null" })">推荐</a>
			</span>*@
			<a class="glyphicon glyphicon-option-horizontal fr more more_new" id="more_new" href="@Url.Action("More", "CroResource", new { type = "zxyc", mediumtypepkid = "null", FileExtName = "null" })"></a>
		</div>
		<div class="d_res_list" id="contain_jiangsu">
		</div>
	</div>

	<!--浙江省-->
	<div class="div_cont fl w100 mt_20 green_edge">
		<div class="title">
			<b>浙江</b>
			@*<span>
					<a href="javascript:;" class="blocktab tab1" data-cat="new" data-type="1" data-url="@Url.Action("More", "CroResource", new { type = "zxyc", mediumtypepkid = "null", FileExtName = "null" })">原创</a>  |
					<a href="javascript:;" class="blocktab" data-cat="new" data-type="2" data-url="@Url.Action("More", "CroResource", new { type = "zxtj", mediumtypepkid = "null", FileExtName = "null" })">推荐</a>
				</span>*@
			<a class="glyphicon glyphicon-option-horizontal fr more more_new" id="more_new" href="@Url.Action("More", "CroResource", new { type = "zxyc", mediumtypepkid = "null", FileExtName = "null" })"></a>
		</div>
		<div class="d_res_list" id="contain_zhejiang">
		</div>
	</div>

	<!--上海市-->
	<div class="div_cont fl w100 mt_20 green_edge">
		<div class="title">
			<b>上海</b>
			@*<span>
					<a href="javascript:;" class="blocktab tab1" data-cat="new" data-type="1" data-url="@Url.Action("More", "CroResource", new { type = "zxyc", mediumtypepkid = "null", FileExtName = "null" })">原创</a>  |
					<a href="javascript:;" class="blocktab" data-cat="new" data-type="2" data-url="@Url.Action("More", "CroResource", new { type = "zxtj", mediumtypepkid = "null", FileExtName = "null" })">推荐</a>
				</span>*@
			<a class="glyphicon glyphicon-option-horizontal fr more more_new" id="more_new" href="@Url.Action("More", "CroResource", new { type = "zxyc", mediumtypepkid = "null", FileExtName = "null" })"></a>
		</div>
		<div class="d_res_list" id="contain_shagnhai">
		</div>
	</div>

	<!--安徽省-->
	<div class="div_cont fl w100 mt_20 green_edge">
		<div class="title">
			<b>安徽</b>
			@*<span>
					<a href="javascript:;" class="blocktab tab1" data-cat="new" data-type="1" data-url="@Url.Action("More", "CroResource", new { type = "zxyc", mediumtypepkid = "null", FileExtName = "null" })">原创</a>  |
					<a href="javascript:;" class="blocktab" data-cat="new" data-type="2" data-url="@Url.Action("More", "CroResource", new { type = "zxtj", mediumtypepkid = "null", FileExtName = "null" })">推荐</a>
				</span>*@
			<a class="glyphicon glyphicon-option-horizontal fr more more_new" id="more_new" href="@Url.Action("More", "CroResource", new { type = "zxyc", mediumtypepkid = "null", FileExtName = "null" })"></a>
		</div>
		<div class="d_res_list" id="contain_anhui">
		</div>
	</div>

</div>
<div class="col-md-3">

		@if (!Request.IsAuthenticated)
		{
			<div class="div_cont w100 fr">
				<div class="title">
					<b>用户登录</b>
				</div>
				<div class="d_login">
					@using (Html.BeginForm("Login", "Account", new { returnUrl = "/CroHome/Index" }, FormMethod.Post))
					{
						@Html.AntiForgeryToken()

						<input class="form-control" type="text" name="username" placeholder="用户名" />
						<input class="form-control" type="password" name="password" placeholder="密码" />
						<input name="rememberme" type="checkbox" value="true" />
						<span>下次自动登录</span>
						<input name="rememberme" type="hidden" value="false" />
						<input type="submit" value="登 录" class="btn" />
					}
				</div>
			</div>
		}
		else
		{
			<div class="block_panel2">
				<div class="panel_title">
					@ResSettings.SettingsInSession.RealName ，欢迎您！
				</div>
				<div class="tellme">
					<a class="" href="@Url.Action("Index", "CroMy", new { id = ResSettings.SettingsInSession.UserId })">进入我的个人中心</a>
					<br /><br />
					<a class="" href="@Url.Action("LogOff2", "Account")">退出我的登录</a>
				</div>
			</div>
		}


	<div class="mt-20">
	@if (Request.IsAuthenticated)
	{
		<a href="@Url.Action("Declare", "CroMy", new { id = ResSettings.SettingsInSession.UserId })"><img class="fr w100 mt_20" src="~/assets/img/flie.jpg" /></a>
	}
	else
	{
		<a href="#" class="upload"><img class="fr w100 mt_20" src="~/assets/img/flie.jpg" /></a>
	}
	</div>

		

		<div class="div_cont fr w100 mt_20">
			<div class="title">
				<b>活跃用户</b><a href="@Url.Action("MoreUser", "CroUser")" class="glyphicon glyphicon-option-horizontal fr more" target="_blank"></a>
			</div>
			<div class="d_user_list">
				<ul class="user_list">

					@foreach (ResActiveUser item in ViewBag.RankingOfActiveUser)
					{
						<li>
							<a class="user_square" href="@Url.Action("Index", "CroMy", new { id=item.UserId })">
								<img src="@item.FitPhotoPath" />
							</a>
							<div>
								<p>@item.RealName</p>
							</div>

						</li>
					}

				</ul>
			</div>
		</div>




		<div class="div_cont fr w100 mt_20">
			<div class="title">
				<b>热门微课</b><a href="@Url.Action("More", "Resource", new { type = "newresource" })" class="glyphicon glyphicon-option-horizontal fr more" target="_blank"></a>
			</div>
			<div class="d_user_list">
				<ul class="new_res_list hot_res">

					@foreach (ResResourceRanking item in ViewBag.RankingOfRMViewCount?? new List<ResResourceRanking>())
					{
						<li>
							<div>	<img src="@item.FitCoverPath" /></div>

							<p>	<a href="@Url.Action("View", "Resource", new { id=item.ResourceId })" target="_blank"> @item.Title</a></p>
							<p><span>作者：</span>@item.Author</p>
							<p><span>访问量：</span>@item.ViewCount</p>
						</li>

					}
				</ul>
			</div>
		</div>

		</div>
	</div>



@section Scripts{
	<script type="text/javascript">
		$(function () {

			function load_hot(RType) {
				$.get("/CroHome/Hot", { RType: RType }, function (response) {
					$("#contain_hot").html(response);
				})
			}

			function load_new(RType) {
				$.get("/CroHome/New", { RType: RType }, function (response) {
					$("#contain_new").html(response);
				})
			}

			$(".blocktab").on("click", function () {
				var $this = $(this), cat = $this.data("cat"), type = $this.data("type");

				if (cat == "hot") {
					load_hot(type);
					$("#more_hot").prop("href", $this.data("url"));
				} else if (cat == "new") {
					load_new(type);
					$("#more_new").prop("href", $this.data("url"));
				}

				$(this).addClass("actived").siblings().removeClass("actived");

			});

			load_hot("1");
			load_new("1");
			$(".tab1").addClass("actived");
	
		})
	</script>



<script type="text/javascript">
	$(".upload").on("click", function () {
		alert("请登录后再上传资源");
		return false;
	});
</script>





	@*<script type="text/javascript">
			$(function () {
				$(".blocktab").on("click", function () {
					var tgt = $(this).data("target");
					$("#" + tgt).removeClass("hidden")
						.siblings().addClass("hidden");
					$(this).addClass("actived")
						.siblings().removeClass("actived");
				});
			})
		</script>*@
}

